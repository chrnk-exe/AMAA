## SERVER

Доки нет, всё что есть по папкам:

* app.ts - главный файл приложения
* routes - пути, использумые в приложении
    * ws - API использующее веб-сокеты (Шариться в папках можно и исполнять команды)
    * http - API использующее протокол HTTP (запуск тестов, получение инфы с девайса)
* controllers - контроллеры (пока 2, контролят наличие нужных кук)
* frida-services - JS скрипты работы с Frida (в тч неиспользуемые)
    * owaspTesting - десять скриптов, прогоняющих различные проверки приложения по оваспу
* utils - различные утилиты/костыли

/api/*

### app API

**device required**

* GET /apps?type={'apps' | 'processes'} - листинг приложений или процессов
* GET /apps/:appPackageName/start - стартует приложение без скриптом
* GET /apps/:appPackageName/get_apk - достаёт апк

### devices API

* GET /device
* GET /device/:deviceId

### testing API

* GET / - все проверки
* GET /:testingNumber - проверка под номером __testingNumber__

### shell API (http)

* GET /shell?pid=number - информация об инстансе консоли
* GET /shells - информация обо всех консолях
* POST /shell - создание шелла
* POST /shell/command - выполнение команды и получение результата в шелле

```json
{
  "pid": 1,
  "cmd": "ls"
}
```

* DELETE /shell?pid=number - удаление шелла

[Веб сокет апи](./AllWebSocketsApi.md)

## Скачивание файла

В каждой сборке андроида есть такая штука, как busybox как я понял,
там хранятся базовые штуки для работы в adb shell

Среди них также есть [netcat](https://ru.wikipedia.org/wiki/Netcat), с помощью которого можно отсылать запросы,
задачей для скачивания файлов на данные момент является научится им отправлять файл в express приложение

Скорее всего это будет некий скрипт на bash (sh), который изначально будет загружаться в `/data/local/tmp/amaa-files`
и оттуда вызываться

Пример, до которого допёр только сейчас:

```bash

echo "POST /upload_file HTTP/1.1\r\nContent-type: application/json\r\nContent-length:$(ls -l | grep file.txt | awk {'print $5'})\r\n\r\n $(cat file.txt)" | nc 192.168.0.109 31337

```

В человеческом виде:

```bash
echo "POST /upload_file HTTP/1.1
Content-type: application/json
Content-length:$(ls -l | grep file.txt | awk {'print $5'})

 $(cat file.txt)" | nc 192.168.0.109 31337
```

`ls -l` выведет длину колбасы,
`cat file` выведет саму колбасу,
`192.168.0.109` - IP машины, куда отправлять файл, тем самым тельчик и приложение должны быть в одной сети.

тем самым нужно сделать скрипт на баше, который будет:

* если дира, то зипать её и отправлять в `/data/local/tmp/temp-zip`
* брать этот файл и пересылать его неткатом себе в экспресс приложение*
* Там его сохранять в папку `temp-files`
* Уведомлять пользователя, что файлы готовы к скачиванию и давать ему их (либо сразу открывать ему их, сервер и фронт же
  на одном компе :))))

/* - самый важный и сложный этап

Отправка файла - [send_file.sh](src/send_file.sh)
Только в заголовок нужно пихнуть ещё имя файла, а так с маленькими, заебись

